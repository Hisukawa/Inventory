import{r as a,j as e,S as R}from"./app-DsyZhXOB.js";import{Q as p}from"./index-CLYbfs45.js";import{A as $}from"./app-sidebar-BekTIKif.js";import{S as Q,a as q,b as z,c as L,B,d as E,e as I,f as M}from"./nav-user-C0Fk7k8P.js";import"./index-DQFvByRA.js";import"./index-BOTaQbIG.js";function U(r){var g;const{rooms:b}=r,[f,c]=a.useState(!1),[n,d]=a.useState(""),[m,x]=a.useState(""),[j,o]=a.useState(!1),h=a.useRef(null),w=(s,u)=>{d(s),x(u),c(!0)},v=()=>{c(!1),d(""),x(""),o(!1)},N=()=>{navigator.clipboard.writeText(n).then(()=>{o(!0),setTimeout(()=>o(!1),2e3)})},S=()=>{const s=h.current.querySelector("svg"),y=new XMLSerializer().serializeToString(s),i=document.createElement("canvas"),C=i.getContext("2d"),t=new Image;t.onload=()=>{i.width=t.width,i.height=t.height,C.drawImage(t,0,0);const k=i.toDataURL("image/png"),l=document.createElement("a");l.download=`${m}-qr.png`,l.href=k,l.click()},t.src=`data:image/svg+xml;base64,${btoa(y)}`};return e.jsxs(Q,{children:[e.jsx($,{}),e.jsxs(q,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(z,{}),e.jsx(L,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(B,{children:e.jsx(E,{children:e.jsx(I,{children:e.jsx(M,{href:"/admin/rooms/list",children:"Room List"})})})})]}),e.jsxs("main",{className:"max-w-6xl mx-auto p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4 text-left",children:"All Added Rooms"}),((g=r.flash)==null?void 0:g.success)&&e.jsx("div",{className:"bg-green-100 text-green-800 px-4 py-2 rounded mb-6 shadow",children:r.flash.success}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center",children:b.map(s=>e.jsxs("div",{className:"w-full max-w-sm p-4 bg-white border rounded shadow text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:s.room_name}),e.jsx("div",{className:"flex justify-center cursor-pointer mb-2",onClick:()=>w(`${window.location.origin}/admin/rooms/${s.id}/equipments`,s.room_name),title:"Click to enlarge",children:e.jsx(p,{value:`${window.location.origin}/admin/rooms/${s.id}/equipments`,size:150})}),e.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[e.jsx("a",{href:`/admin/rooms/${s.id}/equipments`,className:"bg-blue-600 text-white px-3 py-2 rounded hover:bg-blue-700 transition text-sm",children:"View Equipments"}),e.jsx("button",{onClick:()=>{confirm(`Delete ${s.room_name}? This cannot be undone.`)&&R.delete(`/admin/rooms/${s.id}`)},className:"bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700 transition text-sm",children:"Delete"})]})]},s.id))}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",onClick:v,children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg max-w-md w-full",onClick:s=>s.stopPropagation(),children:[e.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:m}),e.jsx("div",{className:"flex justify-center mb-2 cursor-pointer",onClick:N,title:"Click to copy QR value",children:e.jsx("div",{ref:h,children:e.jsx(p,{value:n,size:300})})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600 break-all text-center",children:n}),j&&e.jsx("p",{className:"text-green-600 text-sm text-center mt-1",children:"Copied to clipboard!"}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("button",{onClick:S,className:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded text-sm",children:"Save QR Code as Image"})})]})})]})]})]})}export{U as default};

import{r as s,j as e,S as Z}from"./app-90NRFl5G.js";import{Q as $}from"./index-inUGv1Zh.js";import{S}from"./sweetalert2.esm.all-BQIkj5Wb.js";import{A as ee}from"./app-sidebar-lP8RzBoc.js";import{S as te,a as se,b as ae,c as ne,B as oe,d as re,e as le,f as ie}from"./nav-user-BewcmXZc.js";import"./index-D-UL7pJy.js";import"./index-xHE1Lcl1.js";function he(){const[N,y]=s.useState(""),[C,w]=s.useState(""),[k,z]=s.useState([]),[G,q]=s.useState([]),[u,H]=s.useState(""),[n,J]=s.useState("system-unit"),[R,E]=s.useState(""),[F,L]=s.useState(""),[m,d]=s.useState(""),[c,p]=s.useState(""),[b,x]=s.useState(""),[h,f]=s.useState(""),[j,g]=s.useState(""),[M,K]=s.useState(!1),[r,V]=s.useState(null),[T,A]=s.useState(""),[B,D]=s.useState(""),[_,I]=s.useState(""),[P,U]=s.useState(""),[Q,O]=s.useState("");s.useEffect(()=>{fetch("/api/rooms").then(t=>t.json()).then(t=>{z(t),q(t)})},[]);const X=t=>{const l=t.target.value;w(l),q(k.filter(a=>a.room_number.toLowerCase().includes(l.toLowerCase())))},Y=t=>{t.preventDefault();const l=k.find(o=>o.room_number.toLowerCase()===C.toLowerCase());if(!l){S.fire({icon:"warning",title:"Invalid Room",text:"Please select a valid room from the list."});return}const a={room_id:l.id,equipment_name:N,category:n,type:R,status:F};n==="system-unit"?(a.brand=m,a.processor=c,a.ram=b,a.storage=h,a.os=j):n==="furniture"&&(a.furniture_type=T,a.material=B,a.color=_,a.dimensions=P,a.condition=Q),Z.post("/admin/system-units",a,{preserveScroll:!0,onSuccess:o=>{var i,W;const v=((W=(i=o.props)==null?void 0:i.flash)==null?void 0:W.equipment_path)||"";S.fire({icon:"success",title:"Equipment Added!",text:"The equipment has been added to the inventory."}),H(v),y(""),w(""),E(""),L(""),n==="system-unit"?(M||(d(""),p(""),x(""),f(""),g("")),V({brand:m,processor:c,ram:b,storage:h,os:j})):n==="furniture"&&(A(""),D(""),I(""),U(""),O(""))},onError:o=>{var i;const v=typeof o=="string"?o:((i=Object.values(o))==null?void 0:i[0])||"An unexpected error occurred.";S.fire({icon:"error",title:"Submission Failed",text:v,confirmButtonColor:"#d33"})}})};return e.jsxs(te,{children:[e.jsx(ee,{}),e.jsxs(se,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx(ae,{}),e.jsx(ne,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(oe,{children:e.jsx(re,{children:e.jsx(le,{children:e.jsx(ie,{href:"/admin/equipments/create",children:"Equipment Management"})})})})]}),e.jsx("main",{className:"p-6",children:e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-white rounded shadow",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Add Equipment"}),e.jsxs("form",{onSubmit:Y,children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Category"}),e.jsxs("select",{value:n,onChange:t=>J(t.target.value),className:"border p-2 w-full mb-4 rounded",children:[e.jsx("option",{value:"system-unit",children:"System Unit"}),e.jsx("option",{value:"furniture",children:"Furniture"})]}),e.jsx("label",{className:"block mb-1 font-medium",children:"Room Number"}),e.jsx("input",{type:"text",value:C,onChange:X,list:"room-list",placeholder:"Type room number (e.g. 103)",className:"border p-2 w-full mb-4 rounded",required:!0}),e.jsx("datalist",{id:"room-list",children:G.map(t=>e.jsx("option",{value:t.room_number},t.id))}),e.jsx("label",{className:"block mb-1 font-medium",children:"Equipment Name"}),e.jsx("input",{type:"text",value:N,onChange:t=>y(t.target.value),placeholder:"e.g. PC-1",className:"border p-2 w-full mb-4 rounded",required:!0}),e.jsx("label",{className:"block mb-1 font-medium",children:"Type"}),e.jsx("input",{type:"text",value:R,onChange:t=>E(t.target.value),className:"border p-2 w-full mb-4 rounded",required:!0}),e.jsx("label",{className:"block mb-1 font-medium",children:"Status"}),e.jsxs("select",{value:F,onChange:t=>L(t.target.value),className:"border p-2 w-full mb-4 rounded",required:!0,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"Functional",children:"Functional"}),e.jsx("option",{value:"Defective",children:"Defective"}),e.jsx("option",{value:"Under Maintenance",children:"Under Maintenance"}),e.jsx("option",{value:"Missing",children:"Missing"}),e.jsx("option",{value:"Damaged",children:"Damaged"}),e.jsx("option",{value:"Spare",children:"Spare"}),e.jsx("option",{value:"For Replacement",children:"For Replacement"})]}),n==="system-unit"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"inline-flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",checked:M,onChange:t=>{K(t.target.checked),t.target.checked&&r&&(d(r.brand||""),p(r.processor||""),x(r.ram||""),f(r.storage||""),g(r.os||""))},className:"mr-2"}),"Use same specifications as last"]}),e.jsx("label",{className:"block mb-1 font-medium",children:"Brand"}),e.jsx("input",{type:"text",value:m,onChange:t=>d(t.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Processor"}),e.jsx("input",{type:"text",value:c,onChange:t=>p(t.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"RAM"}),e.jsx("input",{type:"text",value:b,onChange:t=>x(t.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Storage"}),e.jsx("input",{type:"text",value:h,onChange:t=>f(t.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Operating System"}),e.jsx("input",{type:"text",value:j,onChange:t=>g(t.target.value),className:"border p-2 w-full mb-4 rounded",list:"os-options"}),e.jsxs("datalist",{id:"os-options",children:[e.jsx("option",{value:"Windows 10"}),e.jsx("option",{value:"Windows 11"}),e.jsx("option",{value:"Ubuntu 22.04"}),e.jsx("option",{value:"Linux Mint"})]})]}),n==="furniture"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Furniture Type"}),e.jsx("input",{type:"text",value:T,onChange:t=>A(t.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Material"}),e.jsx("input",{type:"text",value:B,onChange:t=>D(t.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Color"}),e.jsx("input",{type:"text",value:_,onChange:t=>I(t.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Dimensions"}),e.jsx("input",{type:"text",value:P,onChange:t=>U(t.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Condition"}),e.jsx("input",{type:"text",value:Q,onChange:t=>O(t.target.value),className:"border p-2 w-full mb-4 rounded"})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Add Equipment"})})]}),u&&e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"QR Code for Equipment"}),e.jsx("div",{className:"inline-block bg-white p-4 border rounded shadow",children:e.jsx($,{value:u,size:180})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:u})]})]})})]})]})}export{he as default};

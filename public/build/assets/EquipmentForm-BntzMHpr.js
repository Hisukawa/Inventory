import{r as t,j as e,S as M}from"./app-DN-hYbi0.js";import{Q}from"./index-Ch-o7vZL.js";import{A as T}from"./app-sidebar-BmhHHsXO.js";import{S as F,a as O,b as $,c as z,B as D,d as U,e as V,f as G}from"./nav-user-By3U3vv0.js";import"./index-Dh6IDVCQ.js";import"./index-CG1DleMN.js";function Z(){const[n,N]=t.useState(""),[S,v]=t.useState(""),[q,E]=t.useState([]),[k,w]=t.useState([]),[l,R]=t.useState(null),[C,m]=t.useState(""),[i,d]=t.useState(""),[c,u]=t.useState(""),[p,b]=t.useState(""),[x,h]=t.useState(""),[j,f]=t.useState(""),[y,L]=t.useState(!1),[r,A]=t.useState(null);t.useEffect(()=>{fetch("/api/rooms").then(s=>s.json()).then(s=>{E(s),w(s)})},[]);const B=s=>{const o=s.target.value;v(o),w(q.filter(g=>g.room_number.toLowerCase().includes(o.toLowerCase())))},_=s=>{s.preventDefault();const o=q.find(a=>a.room_number.toLowerCase()===S.toLowerCase());if(!o){m("Please select a valid room.");return}const g=n.trim().toLowerCase(),P=`${o.qr_code}/${g}`;M.post("/admin/equipments",{room_id:o.id,equipment_name:n,brand:i,processor:c,ram:p,storage:x,os:j},{onSuccess:()=>{R(P),m("Equipment added successfully!"),N(""),y||(d(""),u(""),b(""),h(""),f("")),v(""),A({brand:i,processor:c,ram:p,storage:x,os:j})},onError:a=>{const I=typeof a=="string"?a:(a==null?void 0:a.equipment_name)||"Error adding equipment.";m(I)}})};return e.jsxs(F,{children:[e.jsx(T,{}),e.jsxs(O,{children:[e.jsxs("header",{className:"flex h-16 items-center gap-2 px-4 border-b bg-white",children:[e.jsx($,{}),e.jsx(z,{orientation:"vertical",className:"h-6 mx-3"}),e.jsx(D,{children:e.jsx(U,{children:e.jsx(V,{children:e.jsx(G,{href:"/admin/equipments/create",children:"Equipment Management"})})})})]}),e.jsx("main",{className:"p-6",children:e.jsxs("div",{className:"max-w-xl mx-auto p-6 bg-white rounded shadow",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Add Equipment"})}),C&&e.jsx("div",{className:"bg-green-100 p-2 mb-4 rounded",children:C}),e.jsxs("form",{onSubmit:_,children:[e.jsx("label",{className:"block mb-1 font-medium",children:"Room Number"}),e.jsx("input",{type:"text",value:S,onChange:B,list:"room-list",placeholder:"Type room number (e.g. 103)",className:"border p-2 w-full mb-4 rounded",required:!0}),e.jsx("datalist",{id:"room-list",children:k.map(s=>e.jsx("option",{value:s.room_number},s.id))}),e.jsx("label",{className:"block mb-1 font-medium",children:"Equipment Name"}),e.jsx("input",{type:"text",value:n,onChange:s=>N(s.target.value),placeholder:"e.g. PC-01",className:"border p-2 w-full mb-4 rounded",required:!0}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:s=>{L(s.target.checked),s.target.checked&&r&&(d(r.brand||""),u(r.processor||""),b(r.ram||""),h(r.storage||""),f(r.os||""))},className:"mr-2"}),"Use same specifications as previous equipment"]})}),e.jsx("label",{className:"block mb-1 font-medium",children:"Brand"}),e.jsx("input",{type:"text",value:i,onChange:s=>d(s.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Processor"}),e.jsx("input",{type:"text",value:c,onChange:s=>u(s.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"RAM"}),e.jsx("input",{type:"text",value:p,onChange:s=>b(s.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Storage"}),e.jsx("input",{type:"text",value:x,onChange:s=>h(s.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("label",{className:"block mb-1 font-medium",children:"Operating System"}),e.jsx("input",{type:"text",value:j,onChange:s=>f(s.target.value),className:"border p-2 w-full mb-4 rounded"}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"Add Equipment"})})]}),l&&e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"QR Code for Equipment"}),e.jsx("div",{className:"inline-block bg-white p-4 border rounded shadow",children:e.jsx(Q,{value:l,size:180})}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:l})]})]})})]})]})}export{Z as default};
